from buzzer import Buzzer
from machine import Pin
import time

print('''
ã€èœ‚é¸£å™¨æµ‹è¯•ç¨‹åºã€‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ã€Buzzerã€‘ ->  GPIO4 ï¼ˆè¾“å‡ºå¼•è„šï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
è¯·æŒ‰ç…§å¦‚ä¸Šæ¥çº¿è¯´æ˜è¿›è¡Œæ¥çº¿ï¼Œå¹¶é€‰æ‹©èœ‚é¸£å™¨ç±»å‹ï¼ˆé»˜è®¤ä¸ºæ— æºï¼‰ï¼š
1 - æœ‰æºèœ‚é¸£å™¨
2 - æ— æºèœ‚é¸£å™¨ï¼ˆé»˜è®¤ï¼‰
ç„¶åå›è½¦ç»§ç»­ï¼š''')

buzzer_type = input().strip()
is_active_buzzer = True if buzzer_type == "1" else False

try:
    print("ğŸš© å¼€å§‹æµ‹è¯•èœ‚é¸£å™¨åŠŸèƒ½...")

    print("ğŸ”§ æ­£åœ¨åˆå§‹åŒ–èœ‚é¸£å™¨...")
    buzzer = Buzzer(Pin(4), is_active_buzzer=is_active_buzzer)  # æ ¹æ®ç”¨æˆ·é€‰æ‹©åˆå§‹åŒ–

    print("ğŸ”Š æ­£åœ¨å‘å‡ºä¸€æ¬¡çŸ­ä¿ƒèœ‚é¸£")
    buzzer.beep(times=1, duration=0.3)
    time.sleep(1)

    print("ğŸ”Š æ­£åœ¨è¿ç»­èœ‚é¸£ä¸‰æ¬¡")
    buzzer.beep(times=3, duration=0.2, interval=0.1)
    time.sleep(1)

    if not is_active_buzzer:

        print("ğŸ¼ æ­£åœ¨æ’­æ”¾ä¸€æ®µæ—‹å¾‹:ã€Šå…°äº­åºã€‹")
        melody = [
            'G4', 'A4', 'C5', 'D5', '', '', 'C5', 'D5', 'C5', 'E5', 'D5', 'C5', '', '',
            'C5', 'D5', 'E5', 'G5', '', '', 'E5', 'D5', 'C5', 'A4', 'G4', 'E5', '', '',
            'E5', 'G5', 'A5', 'E5', '', '', 'D5', 'D5', 'C5', 'E5', 'D5', 'C5', '', '',
            'A4', 'C5', 'E5', 'D5', '', '', 'C5', 'A4', 'G4', 'E5', 'D5', 'C5', '', '',
        ]
        for note in melody:
            print(f"ğŸµ æ­£åœ¨æ’­æ”¾ {note}")
            buzzer.play_note(note=note, duration=0.2)
            

        print("ğŸ‰ æ‰€æœ‰æµ‹è¯•å®Œæˆï¼")
    else:
        print("æ³¨æ„ï¼šç”±äºä½¿ç”¨çš„æ˜¯æœ‰æºèœ‚é¸£å™¨ï¼Œä¸èƒ½é€šè¿‡play_noteæ–¹æ³•æ’­æ”¾ä¸åŒéŸ³è°ƒ")
except KeyboardInterrupt:
    print("ç¨‹åºå·²é€€å‡º")
except Exception as e:
    print("å‘ç”Ÿé”™è¯¯ï¼š", e)
finally:
    buzzer.off()
