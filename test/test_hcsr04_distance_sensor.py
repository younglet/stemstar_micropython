import time
from machine import Pin
from hcsr04 import HCSR04


print('''
ã€è¶…å£°æ³¢ä¼ æ„Ÿå™¨ã€‘æ­£åœ¨å¯åŠ¨...
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ã€Trigã€‘ -> GPIO14
ã€Echoã€‘ -> GPIO12
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
è¯·æŒ‰ç…§å¦‚ä¸Šæ¥çº¿è¯´æ˜è¿›è¡Œæ¥çº¿ï¼Œç„¶åæŒ‰è½¦ç»§ç»­ï¼š''')

input()  # ç­‰å¾…ç”¨æˆ·ç¡®è®¤æ¥çº¿å®Œæˆå¹¶å›è½¦ç»§ç»­
# åˆå§‹åŒ–å¼•è„š
try:
    print("ğŸš© å¼€å§‹æµ‹è¯• HCS04 è¶…å£°æ³¢æµ‹è·...")
    print("ğŸ”§ æ­£åœ¨åˆå§‹åŒ– HCS04 è¶…å£°æ³¢æµ‹è·...")
    trig = Pin(14, Pin.OUT)   # Trig å¼•è„š
    echo = Pin(12, Pin.IN)    # Echo å¼•è„š

    # åˆ›å»ºä¼ æ„Ÿå™¨å®ä¾‹
    sensor = HCSR04(trig_pin=trig, echo_pin=echo)

    print("ğŸ“¡ æ­£åœ¨å¼€å§‹æµ‹é‡è·ç¦»...")
    print("ğŸ”„ æ¯éš” 1 ç§’æµ‹é‡ä¸€æ¬¡ï¼ŒæŒ‰ Ctrl+C é€€å‡ºç¨‹åº")

    while True:
        print("ğŸ” æ­£åœ¨è·å–å½“å‰è·ç¦»æ•°æ®...")
        distance = sensor.get_distance()
        print(f"ğŸ“ å½“å‰è·ç¦»: {distance:.1f} cm")
        time.sleep(1)
except KeyboardInterrupt:
    print("\nğŸ‘‹ ç¨‹åºå·²é€€å‡ºï¼Œå…³é—­ä¼ æ„Ÿå™¨")
