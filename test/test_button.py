from button import Button
from machine import Pin
import time

print('''
ã€æŒ‰é’®æµ‹è¯•ç¨‹åºã€‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ã€æŒ‰é’®ã€‘   ->  GPIO2 ï¼ˆè¯·æŒ‰ä¸‹æŒ‰é’®ï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
è¯·æŒ‰ç…§å¦‚ä¸Šæ¥çº¿è¯´æ˜è¿›è¡Œæ¥çº¿ï¼Œç„¶åå›è½¦ç»§ç»­ï¼š''')

input()  # ç­‰å¾…ç”¨æˆ·ç¡®è®¤æ¥çº¿å®Œæˆå¹¶å›è½¦ç»§ç»­

try:
    print("ğŸš© å¼€å§‹æµ‹è¯•æŒ‰é’®åŠŸèƒ½...")

    print("ğŸ”§ æ­£åœ¨åˆå§‹åŒ–æŒ‰é’®...")
    btn_pin = Pin(2, Pin.IN, Pin.PULL_DOWN)
    btn = Button(btn_pin)

    print("ğŸ”˜ ç­‰å¾…é¦–æ¬¡æŒ‰ä¸‹æŒ‰é’®...")
    while True:
        if btn.is_pressed():
            print("âœ… æŒ‰é’®å·²æŒ‰ä¸‹")
            break
        time.sleep_ms(10)

    print("\nğŸ” è¿›å…¥å®æ—¶æŒ‰é’®çŠ¶æ€ç›‘æµ‹ï¼ˆæŒç»­5ç§’ï¼‰...")
    start_time = time.ticks_ms()
    while time.ticks_diff(time.ticks_ms(), start_time) < 5000:
        if btn.is_pressed():
            print("ğŸ”µ æŒ‰é’®è¢«æŒ‰ä¸‹", end='\r')
        else:
            print("âšª æŒ‰é’®æœªæŒ‰ä¸‹", end='\r')
        time.sleep_ms(50)

    print("\nğŸ”š æŒ‰é’®çŠ¶æ€ç›‘æµ‹ç»“æŸ")

    print("ğŸ‰ æ‰€æœ‰æµ‹è¯•å®Œæˆï¼")

except KeyboardInterrupt:
    print("\nç¨‹åºå·²é€€å‡º")
except Exception as e:
    print("å‘ç”Ÿé”™è¯¯ï¼š", e)
